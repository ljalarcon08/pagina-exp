import{a as y,b as W,c as F,d as Y,e as Qe,f as Z,h as st}from"./chunk-F6UYYF7Z.js";import{a as lt,b as mt,c as ct,d as X,e as pt,g as dt}from"./chunk-VP3DFRFS.js";import{A as Q,B as $e,C as Ge,P as We,Pa as Je,Q as Ye,Qa as Ke,Ra as et,Sa as tt,Ta as it,Ua as nt,Va as ot,Wa as rt,Xa as at,a as Ne,b as ze,c as Ue,d as Re,f as Ve,g as De,h as Le,i as Be,j as oe,l as je,la as Ze,m as k,ma as Xe,n as qe,p as E,q as b,s as P,t as q,v as He,w as H,y as $,z as G}from"./chunk-PMVUUNJQ.js";import"./chunk-LJTJCYUT.js";import{Aa as C,Ab as m,Cb as xe,Fb as ye,I as ce,Ia as ge,Jb as a,Kb as r,Lb as d,Oc as Fe,Pb as S,Qa as fe,Sb as v,Ub as f,X as pe,Xc as M,Yb as Se,Zb as Me,Zc as Te,_ as V,_b as we,_c as Ae,ab as T,bc as A,cc as l,da as de,db as c,e as U,eb as h,ec as Ie,fb as he,fc as ke,g as R,ga as D,gb as ne,gc as Oe,ha as L,hb as ve,hc as Ee,jb as be,kc as N,la as ie,lb as _e,lc as z,ma as B,nc as Pe,q as te,qa as x,ra as j,u as me,ua as ue,ya as I,yb as g,za as _,zb as Ce}from"./chunk-3MC5IIBM.js";var wt=[{path:"producto",loadChildren:()=>import("./chunk-LKK7GOM3.js").then(n=>n.ProductoSharedModule)},{path:"",pathMatch:"full",redirectTo:"producto/home"},{path:"admin",loadChildren:()=>import("./chunk-ZQ25O3EZ.js").then(n=>n.AdminSharedModule)},{path:"**",redirectTo:"producto/home"}],ut=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=j({type:e}),e.\u0275inj=L({imports:[oe.forRoot(wt),st.forRoot(),dt.forRoot(),oe]});let n=e;return n})();var Ct=U(X());var O=(()=>{let e=class e{constructor(t,i){this.http=t,this.libService=i,this.URL_USUARIO=`${je.serverUrl}/api/usuario`}getUsuarioByEmail(t){return this.http.get(`${this.URL_USUARIO}/email/${t}`,this.libService.getHeader())}actualizarUsuario(t){return this.http.put(`${this.URL_USUARIO}/actualizar/${t.id}`,t,this.libService.getHeader())}actualizaImagenUsuario(t,i){return this.http.put(`${this.URL_USUARIO}/actualizarImagen/${t}`,{imagen:i},this.libService.getHeader())}};e.\u0275fac=function(i){return new(i||e)(ie(Ne),ie(k))},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var ae=U(X());function It(n,e){n&1&&(a(0,"span",16),l(1,"Favor ingrese email o formato incorrecto"),r())}function kt(n,e){n&1&&(a(0,"span",16),l(1,"Favor ingrese contrase\xF1a"),r())}function Ot(n,e){if(n&1){let o=S();a(0,"div",3)(1,"h6"),l(2,"Ingresa a tu cuenta"),r(),a(3,"form",4),v("ngSubmit",function(){_(o);let i=f();return C(i.login())}),a(4,"div",5)(5,"div",6)(6,"label",7),l(7,"Email"),r(),d(8,"input",8),g(9,It,2,0,"span",9),r()(),a(10,"div",5)(11,"div",6)(12,"label",7),l(13,"Contrase\xF1a"),r(),d(14,"input",10),g(15,kt,2,0,"span",9),r()(),a(16,"div",11)(17,"div",12)(18,"button",13),l(19,"Ingresar"),r()(),a(20,"div",14)(21,"button",15),v("click",function(){_(o);let i=f();return C(i.abrirRegistrar())}),l(22,"Registrarte"),r()()()()()}if(n&2){let o=f();c(3),m("formGroup",o.loginForm),c(6),m("ngIf",o.campoError("email",o.loginForm)),c(6),m("ngIf",o.campoError("password",o.loginForm))}}function Et(n,e){n&1&&(a(0,"span",16),l(1,"Favor ingrese nombre completo"),r())}function Pt(n,e){n&1&&(a(0,"span",16),l(1,"Favor ingrese email o formato incorrecto"),r())}function Ft(n,e){n&1&&(a(0,"span",16),l(1,"Favor ingrese contrase\xF1a"),r())}function Tt(n,e){n&1&&(a(0,"span",16),l(1,"Favor ingrese contrase\xF1a"),r())}function At(n,e){if(n&1){let o=S();a(0,"div",3)(1,"h6",17),l(2,"Crea tu cuenta"),r(),a(3,"form",4),v("ngSubmit",function(){_(o);let i=f();return C(i.signUp())}),a(4,"div",5)(5,"div",6)(6,"label",7),l(7,"Nombre"),r(),d(8,"input",18),g(9,Et,2,0,"span",9),r()(),a(10,"div",5)(11,"div",6)(12,"label",7),l(13,"Email"),r(),d(14,"input",8),g(15,Pt,2,0,"span",9),r()(),a(16,"div",5)(17,"div",6)(18,"label",7),l(19,"Contrase\xF1a"),r(),d(20,"input",10),g(21,Ft,2,0,"span",9),r()(),a(22,"div",5)(23,"div",6)(24,"label",7),l(25,"Repita Contrase\xF1a"),r(),d(26,"input",19),g(27,Tt,2,0,"span",9),r()(),a(28,"div",11)(29,"div",12)(30,"button",13),l(31,"Ingresar"),r()()()()()}if(n&2){let o=f();c(3),m("formGroup",o.signUpForm),c(6),m("ngIf",o.campoError("nombre",o.signUpForm)),c(6),m("ngIf",o.campoError("email",o.signUpForm)),c(6),m("ngIf",o.campoError("password",o.signUpForm)),c(6),m("ngIf",o.campoError("password2",o.signUpForm))}}var ft=(()=>{let e=class e{constructor(t,i,s){this.formBuilder=t,this.usuarioService=i,this.libAuthService=s,this.submitF=!1,this.usuario=new y(1,"","",""),this.offCanvas=F.prototype,this.registrar=!1,this.loginForm=this.formBuilder.group({email:["",[b.required,b.email]],password:["",[b.required]]}),this.signUpForm=this.formBuilder.group({nombre:["",[b.required]],email:["",[b.required,b.email]],password:["",[b.required]],password2:["",[b.required]]},{validators:this.revisarPasswords("password","password2")})}ngOnChanges(t){t.offCanvas&&(this.offCanvas=t.offCanvas.currentValue)}login(){if(this.submitF=!0,!this.loginForm.invalid){let t=this.loginForm.get("email")?.value;this.usuario.email=t;let i=this.loginForm.get("password")?.value;this.libAuthService.login(t,i).pipe(V(s=>this.usuarioService.getUsuarioByEmail(t))).subscribe(s=>{this.usuario=s[0],ae.default.fire("Sesion","Sesi\xF3n iniciada correctamente","success"),this.cerrar()})}}campoError(t,i){return!!(i.get(t)?.invalid&&this.submitF)}cerrar(){this.submitF=!1,this.offCanvas.close(this.usuario)}abrirRegistrar(){this.registrar=!0}revisarPasswords(t,i){return s=>{let p=s.get(t),u=s.get(i);p.value===u.value?u.setErrors(null):u.setErrors({noEsIgual:!0})}}signUp(){if(this.submitF=!0,!this.signUpForm.invalid){let t=this.signUpForm.get("nombre").value,i=this.signUpForm.get("email").value,s=this.signUpForm.get("password").value,p=new y(1,t,i,"",s,!1);this.libAuthService.signUp(p).subscribe(u=>{this.usuario=u,ae.default.fire("Estado Registro","Registro creado exitosamente","success"),this.submitF=!1,this.offCanvas.close()})}}};e.\u0275fac=function(i){return new(i||e)(h(Q),h(O),h(k))},e.\u0275cmp=x({type:e,selectors:[["app-inicio-sesion"]],inputs:{offCanvas:"offCanvas"},features:[I],decls:4,vars:2,consts:[[1,"login-register","login-sidebar"],[1,"login-box","card"],["class","card-body",4,"ngIf"],[1,"card-body"],["autocomplete","off",1,"form-horizontal","form-material",3,"ngSubmit","formGroup"],[1,"form-group","m-t-40"],[1,"col-xs-12"],[1,"label-type"],["type","email","placeholder","Email","formControlName","email",1,"form-control"],["class","input-error",4,"ngIf"],["type","password","placeholder","Contrase\xF1a","formControlName","password",1,"form-control"],[1,"row"],[1,"col"],["type","submit",1,"btn","btn-success","col-sm-7"],[1,"col","col-sm-5"],["type","button",1,"btn","btn-outline-success",3,"click"],[1,"input-error"],[1,"primary"],["type","nombre","placeholder","Nombre","formControlName","nombre",1,"form-control"],["type","password","placeholder","Repita Contrase\xF1a","formControlName","password2",1,"form-control"]],template:function(i,s){i&1&&(a(0,"section",0)(1,"div",1),g(2,Ot,23,3,"div",2)(3,At,32,5,"div",2),r()()),i&2&&(c(2),m("ngIf",!s.registrar),c(),m("ngIf",s.registrar))},dependencies:[M,H,E,P,q,$,G],styles:[".form-control[_ngcontent-%COMP%]{color:#67757c;min-height:38px;display:initial}.form-group[_ngcontent-%COMP%]{margin-bottom:25px}.form-material[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{font:.5rem/1.5 var(--bs-font-sans-serif);overflow:hidden}.form-material[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{background-color:transparent;background-position:center bottom,center calc(100% - 1px);background-repeat:no-repeat;background-size:0 2px,100% 1px;padding:0;-webkit-transition:background 0s ease-out 0s;-o-transition:background 0s ease-out 0s;transition:background 0s ease-out 0s}.form-material[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%], .form-material[_ngcontent-%COMP%]   .form-control.focus[_ngcontent-%COMP%], .form-material[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{background-image:-webkit-gradient(linear,left top,left bottom,from(#398bf7),to(#398bf7)),-webkit-gradient(linear,left top,left bottom,from(#e9edf2),to(#e9edf2));background-image:-webkit-linear-gradient(#398bf7,#398bf7),-webkit-linear-gradient(#e9edf2,#e9edf2);background-image:-o-linear-gradient(#398bf7,#398bf7),-o-linear-gradient(#e9edf2,#e9edf2);background-image:linear-gradient(#398bf7,#398bf7),linear-gradient(#e9edf2,#e9edf2);border:0 none;border-radius:0;-webkit-box-shadow:none;box-shadow:none;float:none}.form-horizontal[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:0}.form-control[_ngcontent-%COMP%]{border:0px;border-radius:0;padding-left:0;border-bottom:1px solid #f6f9ff}.form-control[_ngcontent-%COMP%]:focus{border-bottom:1px solid #398bf7}.input-error[_ngcontent-%COMP%]{color:red;font-size:small}.label-type[_ngcontent-%COMP%]{font-size:small;color:#67757c}"]});let n=e;return n})();var ht=U(X());function zt(n,e){n&1&&(a(0,"span",14),l(1,"Favor ingrese nombre"),r())}function Ut(n,e){n&1&&(a(0,"span",14),l(1,"Favor ingrese email o formato incorrecto"),r())}function Rt(n,e){n&1&&(a(0,"span",14),l(1,"Favor ingrese contrase\xF1a o contrase\xF1as no coinciden"),r())}function Vt(n,e){n&1&&(a(0,"span",14),l(1,"Favor ingrese contrase\xF1a o contrase\xF1as no coinciden"),r())}function Dt(n,e){if(n&1){let o=S();a(0,"form",4),v("ngSubmit",function(){_(o);let i=f();return C(i.actualizarUsuario())}),a(1,"div",5)(2,"div",6)(3,"label",7),l(4,"Nombre"),r(),d(5,"input",8),g(6,zt,2,0,"span",9),r()(),a(7,"div",5)(8,"div",6)(9,"label",7),l(10,"Email"),r(),d(11,"input",10),g(12,Ut,2,0,"span",9),r()(),a(13,"div",5)(14,"div",6)(15,"label",7),l(16,"Nueva contrase\xF1a"),r(),d(17,"input",11),g(18,Rt,2,0,"span",9),r()(),a(19,"div",5)(20,"div",6)(21,"label",7),l(22,"Repetir nueva contrase\xF1a"),r(),d(23,"input",12),g(24,Vt,2,0,"span",9),r()(),a(25,"div")(26,"button",13),l(27,"Ingresar"),r()()()}if(n&2){let o=f();m("formGroup",o.actualizarForm),c(6),m("ngIf",o.campoError("email")),c(6),m("ngIf",o.campoError("email")),c(6),m("ngIf",o.campoError("password")),c(6),m("ngIf",o.campoError("password2"))}}var vt=(()=>{let e=class e{constructor(t,i){this.formBuilder=t,this.usuarioService=i,this.usuario=new y(1,"","",""),this.offCanvas=F.prototype,this.submitM=!1,this.cambioOk=!1,this.actualizarForm=this.formBuilder.group({nombre:["",b.required],email:["",[b.required,b.email]],password:["",[b.required]],password2:["",[b.required]]},{validators:this.revisarPasswords("password","password2")}),this.actualizarForm.controls.email.disable()}ngOnChanges(t){this.usuario=t.usuario.currentValue,this.actualizarForm.patchValue({nombre:this.usuario.name}),this.actualizarForm.patchValue({email:this.usuario.email}),t.offCanvas&&(this.offCanvas=t.offCanvas.currentValue)}actualizarUsuario(){if(this.submitM=!0,!this.actualizarForm.invalid){let t=this.actualizarForm.get("nombre").value,i=this.actualizarForm.get("email").value,s=this.actualizarForm.get("password").value,p=new y(this.usuario.id,t,i,this.usuario.imagen,s,this.usuario.google);this.usuarioService.actualizarUsuario(p).subscribe(u=>{this.usuario=u,this.cambioOk=!0,this.cerrar(),ht.default.fire("Actualizaci\xF3n Usuario","Cambios aplicados correctamente","success")})}}campoError(t){return!!(this.actualizarForm.get(t)?.invalid&&this.submitM)}revisarPasswords(t,i){return s=>{let p=s.get(t),u=s.get(i);p.value===u.value?u.setErrors(null):u.setErrors({noEsIgual:!0})}}cerrar(){this.offCanvas.close(this.usuario)}};e.\u0275fac=function(i){return new(i||e)(h(Q),h(O))},e.\u0275cmp=x({type:e,selectors:[["app-actualiza-usuario"]],inputs:{usuario:"usuario",offCanvas:"offCanvas"},features:[I],decls:4,vars:1,consts:[[1,"login-register","login-sidebar"],[1,"login-box","card"],[1,"card-body"],["class","form-horizontal form-material","autocomplete","off",3,"formGroup","ngSubmit",4,"ngIf"],["autocomplete","off",1,"form-horizontal","form-material",3,"ngSubmit","formGroup"],[1,"form-group","m-t-40"],[1,"col-xs-12"],[1,"label-type"],["type","nombre","placeholder","Nombre","formControlName","nombre",1,"form-control"],["class","input-error",4,"ngIf"],["readonly","readonly","type","email","placeholder","Email","formControlName","email",1,"form-control","disabled-input"],["type","password","placeholder","Contrase\xF1a","formControlName","password",1,"form-control"],["type","password","placeholder","Repita Contrase\xF1a","formControlName","password2",1,"form-control"],["type","submit",1,"btn","btn-success"],[1,"input-error"]],template:function(i,s){i&1&&(a(0,"section",0)(1,"div",1)(2,"div",2),g(3,Dt,28,5,"form",3),r()()()),i&2&&(c(3),m("ngIf",!s.cambioOk))},dependencies:[M,H,E,P,q,$,G],styles:[".login-register[_ngcontent-%COMP%]{background-size:cover;background-repeat:no-repeat;background-position:center center;height:100%;width:100%;padding:10% 0;position:fixed}.login-box[_ngcontent-%COMP%]{margin:0 auto}.login-box[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{left:0;right:0}.login-box[_ngcontent-%COMP%]   .social[_ngcontent-%COMP%]{display:block;margin-bottom:30px}#recoverform[_ngcontent-%COMP%]{display:none}.login-sidebar[_ngcontent-%COMP%]{padding:0;margin-top:0}.login-sidebar[_ngcontent-%COMP%]   .login-box[_ngcontent-%COMP%]{position:absolute;height:100%;width:100%;max-height:450px;max-width:350px}.form-control[_ngcontent-%COMP%]{color:#67757c;min-height:38px;display:initial}.form-group[_ngcontent-%COMP%]{margin-bottom:25px}.form-material[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{overflow:hidden}.form-material[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{background-color:transparent;background-position:center bottom,center calc(100% - 1px);background-repeat:no-repeat;background-size:0 2px,100% 1px;padding:0;-webkit-transition:background 0s ease-out 0s;-o-transition:background 0s ease-out 0s;transition:background 0s ease-out 0s}.form-material[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%], .form-material[_ngcontent-%COMP%]   .form-control.focus[_ngcontent-%COMP%], .form-material[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{background-image:-webkit-gradient(linear,left top,left bottom,from(#398bf7),to(#398bf7)),-webkit-gradient(linear,left top,left bottom,from(#e9edf2),to(#e9edf2));background-image:-webkit-linear-gradient(#398bf7,#398bf7),-webkit-linear-gradient(#e9edf2,#e9edf2);background-image:-o-linear-gradient(#398bf7,#398bf7),-o-linear-gradient(#e9edf2,#e9edf2);background-image:linear-gradient(#398bf7,#398bf7),linear-gradient(#e9edf2,#e9edf2);border:0 none;border-radius:0;-webkit-box-shadow:none;box-shadow:none;float:none}.form-horizontal[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:0}.form-control[_ngcontent-%COMP%]{border:0px;border-radius:0;padding-left:0;border-bottom:1px solid #f6f9ff}.form-control[_ngcontent-%COMP%]:focus{border-bottom:1px solid #398bf7}.input-error[_ngcontent-%COMP%]{color:red;font-size:small}.avatar-img[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:40px}.cursor[_ngcontent-%COMP%]{cursor:pointer}.disabled-input[_ngcontent-%COMP%]{color:silver}.label-type[_ngcontent-%COMP%]{font-size:small;color:#67757c}"]});let n=e;return n})();var bt=U(X());function jt(n,e){if(n&1&&d(0,"img",19),n&2){let o=f();m("src",o.imagenService.img,T)}}function qt(n,e){n&1&&d(0,"img",20)}function Ht(n,e){if(n&1&&d(0,"img",21),n&2){let o=f();m("src",o.imgTemp,T)}}var _t=(()=>{let e=class e{constructor(t,i){this.imagenService=t,this.usuarioService=i,this.imagen="",this.imgTemp=null,this.imgCheck="",this.swal=bt.default}cerrarModal(){this.imgTemp=null,this.imgCheck="",this.imagenService.cerrarModal()}revisarImagen(t){this.imgCheck=t.target.value,this.imagenService.revisaTipoImagen(t.target.value)?this.imgTemp=this.imgCheck:t.target.value=""}cambiarImagen(){this.imgTemp=this.imgCheck,this.imagen=this.imgCheck}subirImagen(){let t=this.imagenService.id;this.imagenService.tipo==="usuario"&&this.actualizarImagenUsuario(Number(t))}actualizarImagenUsuario(t){this.usuarioService.actualizaImagenUsuario(t,this.imgCheck).subscribe(i=>{this.respuestaCarga(i)})}respuestaCarga(t){this.imagenService.emitirNuevaImagen(this.imagen),this.cerrarModal(),this.swal.fire("Actualizar Imagen","Imagen actualizada correctamente","success")}};e.\u0275fac=function(i){return new(i||e)(h(Z),h(O))},e.\u0275cmp=x({type:e,selectors:[["app-imagen-modal"]],decls:33,vars:6,consts:[[1,"fondo-modal-imagen","animated","fadeIn","fast"],["tabindex","-1","role","dialog",1,"modal","fade","show",2,"display","block"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body"],[1,"container"],[1,"row"],[1,"col"],[1,"text-center"],["class","img-avatar","alt","Imagen Actual","title","Imagen Actual",3,"src",4,"ngIf"],["src","noimg.jpg","class","img-avatar",4,"ngIf"],["class","img-avatar","alt","Imagen Nueva","title","Imagen Nueva",3,"src",4,"ngIf"],["type","url","placeholder","Ingrese url de imagen",3,"change","ngModelChange","ngModel"],["disabled","!imgCheck",1,"btn","btn-secondary","btn-sm",3,"click"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-default",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],["alt","Imagen Actual","title","Imagen Actual",1,"img-avatar",3,"src"],["src","noimg.jpg",1,"img-avatar"],["alt","Imagen Nueva","title","Imagen Nueva",1,"img-avatar",3,"src"]],template:function(i,s){i&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h5",5),l(6,"Cargar imagen"),r()(),a(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"p",10)(12,"b"),l(13,"Imagen actual"),r()()(),a(14,"div",9)(15,"p",10)(16,"b",10),l(17,"Imagen nueva"),r()()()(),a(18,"div",8)(19,"div",9),g(20,jt,1,1,"img",11)(21,qt,1,0,"img",12),r(),a(22,"div",9),g(23,Ht,1,1,"img",13),r()()()(),a(24,"div",10)(25,"input",14),v("change",function(u){return s.revisarImagen(u)}),Ee("ngModelChange",function(u){return Oe(s.imgCheck,u)||(s.imgCheck=u),u}),r(),a(26,"button",15),v("click",function(){return s.cambiarImagen()}),l(27,"Ver"),r()(),a(28,"div",16)(29,"button",17),v("click",function(){return s.cerrarModal()}),l(30," Cancelar "),r(),a(31,"button",18),v("click",function(){return s.subirImagen()}),l(32,"Actualizar foto"),r()()()()()()),i&2&&(xe("oculto",s.imagenService.ocultarModal),c(20),m("ngIf",s.imagenService.revisaTipoImagen(s.imagenService.img)),c(),m("ngIf",!s.imagenService.revisaTipoImagen(s.imagenService.img)),c(2),m("ngIf",s.imgTemp),c(2),ke("ngModel",s.imgCheck))},dependencies:[M,E,P,He],styles:[".fondo-modal-imagen[_ngcontent-%COMP%]{background-color:#0006;left:0;height:100%;position:fixed;top:0;width:100%;z-index:9999}.oculto[_ngcontent-%COMP%]{display:none}.fast[_ngcontent-%COMP%]{-webkit-animation-duration:.3s;animation-duration:.3s;-webkit-animation-fill-mode:both;animation-fill-mode:both}.img-avatar[_ngcontent-%COMP%]{height:100%;width:100%}"]});let n=e;return n})();var Gt=["content"];function Qt(n,e){n&1&&(a(0,"h5",15),l(1,"Ingresar / Registrarte"),r())}function Wt(n,e){n&1&&(a(0,"h5",15),l(1,"Actualizar datos"),r())}function Yt(n,e){if(n&1&&d(0,"app-inicio-sesion",16),n&2){let o=f(2);m("offCanvas",o.offCanvas)}}function Zt(n,e){if(n&1&&d(0,"app-actualiza-usuario",17),n&2){let o=f(2);m("offCanvas",o.offCanvas)("usuario",o.usuario)}}function Xt(n,e){if(n&1){let o=S();a(0,"div",9),g(1,Qt,2,0,"h5",10)(2,Wt,2,0,"h5",10),a(3,"button",11),v("click",function(){_(o);let i=f();return C(i.cerrar())}),r()(),a(4,"div",12),g(5,Yt,1,1,"app-inicio-sesion",13)(6,Zt,1,2,"app-actualiza-usuario",14),r()}if(n&2){let o=f();c(),m("ngIf",!o.actDatos),c(),m("ngIf",o.actDatos),c(3),m("ngIf",!o.loginOk),c(),m("ngIf",o.actDatos)}}function Jt(n,e){if(n&1){let o=S();a(0,"a",18),v("click",function(){_(o);let i=f(),s=A(1);return C(i.abrir(s))}),d(1,"img",19),r()}}function Kt(n,e){if(n&1&&d(0,"img",23),n&2){let o=f(2);m("src",o.usuario.imagen,T)}}function ei(n,e){n&1&&d(0,"img",24)}function ti(n,e){if(n&1&&(a(0,"a",20),g(1,Kt,1,1,"img",21)(2,ei,1,0,"img",22),r()),n&2){let o=f();c(),m("ngIf",o.imagenService.revisaTipoImagen(o.usuario.imagen)),c(),m("ngIf",!o.imagenService.revisaTipoImagen(o.usuario.imagen))}}var xt=(()=>{let e=class e{constructor(t,i,s,p,u){this.config=t,this.offcanvasService=i,this.imagenService=s,this.libAuthService=p,this.usuarioService=u,this.templateRef=ne.prototype,this.usuario=new y(1,"","",""),this.submitF=!1,this.actDatos=!1,this.loginOk=!1,this.offCanvas=F.prototype,this.changeImg=R.EMPTY,t.position="end",t.keyboard=!1,t.scroll=!0,this.swal=Ct.default}ngOnInit(){if(this.libAuthService.getToken()){let t=this.libAuthService.getEmail();this.libAuthService.checkToken().pipe(V(i=>i.valid?this.usuarioService.getUsuarioByEmail(t):(this.libAuthService.quitarToken(),this.loginOk=!1,te())),ce(i=>(this.libAuthService.quitarToken(),te()))).subscribe(i=>{i?(this.usuario=i[0],this.loginOk=!0):this.loginOk=!1})}this.changeImg=this.imagenService.nuevaImagen.subscribe(t=>{this.cargaUsuario()})}cargaUsuario(){if(this.libAuthService.getToken()){let t=this.libAuthService.getEmail();this.usuarioService.getUsuarioByEmail(t).subscribe(i=>{this.usuario=i[0]})}}ngOnChanges(t){this.usuario=t.usuario.currentValue,this.libAuthService.getToken()&&this.usuario.email&&(this.loginOk=!0)}abrir(t){this.actDatos=!1,this.offCanvas=this.offcanvasService.open(t),this.offCanvas.closed.subscribe(i=>{i?(this.usuario=i,this.loginOk=!0):(this.usuario=new y(1,"","",""),this.loginOk=!1)})}cerrar(){this.submitF=!1,this.actDatos=!1,this.offCanvas.dismiss()}actualizarDatos(t){this.actDatos=!0,this.loginOk=!0,this.offCanvas=this.offcanvasService.open(t),this.offCanvas.closed.subscribe(i=>{this.usuario=new y(1,"","",""),this.loginOk=!1})}abrirModal(t){this.imagenService.abrirModal("usuario",t.id+"",t.imagen)}cerrarSesion(){this.swal.fire({text:"\xBFDesea cerrar sesion?",showDenyButton:!0,confirmButtonText:"Si",denyButtonText:"No",customClass:{actions:"my-actions",confirmButton:"order-2",denyButton:"order-3",title:"popTitle"}}).then(t=>{t.isConfirmed&&(this.loginOk=!1,this.libAuthService.logout().subscribe(i=>{this.libAuthService.quitarToken()}))})}};e.\u0275fac=function(i){return new(i||e)(h(W),h(Y),h(Z),h(k),h(O))},e.\u0275cmp=x({type:e,selectors:[["app-login"]],viewQuery:function(i,s){if(i&1&&Se(Gt,7,ne),i&2){let p;Me(p=we())&&(s.templateRef=p.first)}},inputs:{usuario:"usuario"},features:[I],decls:25,vars:3,consts:[["content",""],["class","btn btn-sm btn-outline-seconday cursor",3,"click",4,"ngIf"],["class","nav-link dropdown-toggle","href","#","role","button","data-bs-toggle","dropdown","aria-expanded","false",4,"ngIf"],[1,"navbar","navbar-expand-lg","navbar-dark"],[1,"container-fluid"],[1,"dropdown-menu","dropdown-menu-dark"],[1,"dropdown-item","disabled"],[1,"dropdown-divider"],[1,"dropdown-item","cursor",3,"click"],[1,"offcanvas-header"],["class","offcanvas-title",4,"ngIf"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"offcanvas-body"],[3,"offCanvas",4,"ngIf"],[3,"offCanvas","usuario",4,"ngIf"],[1,"offcanvas-title"],[3,"offCanvas"],[3,"offCanvas","usuario"],[1,"btn","btn-sm","btn-outline-seconday","cursor",3,"click"],["src","no-avatar.jpg",1,"avatar-img"],["href","#","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle"],["class","avatar-img",3,"src",4,"ngIf"],["class","avatar-img","src","noimg.jpg",4,"ngIf"],[1,"avatar-img",3,"src"],["src","noimg.jpg",1,"avatar-img"]],template:function(i,s){if(i&1){let p=S();g(0,Xt,7,4,"ng-template",null,0,Pe)(2,Jt,2,0,"a",1)(3,ti,3,2,"a",2),a(4,"nav",3)(5,"div",4)(6,"ul",5)(7,"li")(8,"a",6)(9,"small"),l(10),r()()(),a(11,"li"),d(12,"hr",7),r(),a(13,"li")(14,"a",8),v("click",function(){_(p);let ee=A(1);return C(s.actualizarDatos(ee))}),l(15,"Actualizar Datos"),r()(),a(16,"li")(17,"a",8),v("click",function(){return _(p),C(s.abrirModal(s.usuario))}),l(18,"Actualizar Avatar"),r()(),a(19,"li"),d(20,"hr",7),r(),a(21,"li")(22,"a",8),v("click",function(){return _(p),C(s.cerrarSesion())}),l(23,"Cerrar Sesi\xF3n"),r()()()()(),d(24,"app-imagen-modal")}i&2&&(c(2),m("ngIf",!s.loginOk),c(),m("ngIf",s.loginOk),c(7),Ie("Bienvenido ",s.usuario.name,""))},dependencies:[M,ft,vt,_t],styles:[".login-register[_ngcontent-%COMP%]{background-size:cover;background-repeat:no-repeat;background-position:center center;height:100%;width:100%;padding:10% 0;position:fixed}.login-box[_ngcontent-%COMP%]{margin:0 auto}.login-box[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{left:0;right:0}.login-box[_ngcontent-%COMP%]   .social[_ngcontent-%COMP%]{display:block;margin-bottom:30px}#recoverform[_ngcontent-%COMP%]{display:none}.login-sidebar[_ngcontent-%COMP%]{padding:0;margin-top:0}.login-sidebar[_ngcontent-%COMP%]   .login-box[_ngcontent-%COMP%]{position:absolute;height:100%;width:100%;max-height:400px;max-width:350px}.cursor[_ngcontent-%COMP%]{cursor:pointer}.offcanvas-header[_ngcontent-%COMP%]{color:bisque;background-color:#398bf7}.avatar-img[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:40px}"]});let n=e;return n})();function ni(n,e){n&1&&(a(0,"a",14)(1,"mat-icon"),l(2,"admin_panel_settings"),r(),a(3,"span",6),l(4,"Admin"),r()())}function oi(n,e){if(n&1){let o=S();a(0,"button",15),v("click",function(){_(o),f();let i=A(2);return C(i.toggle())}),a(1,"mat-icon",16),l(2,"menu"),r()()}}var yt=(()=>{let e=class e{constructor(t,i){this.libService=t,this.router=i,this.breakpointObserver=B(We),this.usuario=new y(1,"","",""),this.rolAdmin=!1,this.cambioToken=R.EMPTY,this.isHandset$=this.breakpointObserver.observe(Ye.Handset).pipe(me(s=>s.matches),pe()),this.rolAdmin=t.tieneRol("ROLE_ADMIN")}ngOnChanges(t){let i=t.usuario.currentValue}ngOnDestroy(){this.cambioToken.unsubscribe}ngOnInit(){this.cambioToken=this.libService.cambioToken.subscribe(t=>this.rolAdmin=this.libService.tieneRol("ROLE_ADMIN"))}};e.\u0275fac=function(i){return new(i||e)(h(k),h(De))},e.\u0275cmp=x({type:e,selectors:[["app-nav"]],features:[I],decls:31,vars:14,consts:[["drawer",""],[1,"sidenav-container"],["fixedInViewport","",1,"sidenav",3,"mode","opened"],["color","primary"],["mat-button",""],["mat-list-item","","routerLink","/producto/home","routerLinkActive","router-link-active"],[1,"opc"],["mat-list-item","","routerLink","/admin/home",4,"ngIf"],["type","button","aria-label","Toggle sidenav","mat-icon-button",""],[1,"row"],[1,"col","float-start","col-sm-11","logo"],["routerLink","/producto/home"],[1,"col","col-sm-1","position-absolute","top-50","end-0"],[3,"usuario"],["mat-list-item","","routerLink","/admin/home"],["type","button","aria-label","Toggle sidenav","mat-icon-button","",3,"click"],["aria-label","Side nav toggle icon"]],template:function(i,s){i&1&&(a(0,"mat-sidenav-container",1)(1,"mat-sidenav",2,0),N(3,"async"),N(4,"async"),N(5,"async"),a(6,"mat-toolbar",3)(7,"button",4)(8,"mat-icon"),l(9,"menu"),r(),l(10,"Menu"),r()(),a(11,"mat-nav-list")(12,"a",5)(13,"mat-icon"),l(14,"shopping_bag"),r(),a(15,"span",6),l(16,"Producto"),r()(),g(17,ni,5,0,"a",7),r()(),a(18,"mat-sidenav-content")(19,"mat-toolbar",3),g(20,oi,3,0,"button",8),N(21,"async"),a(22,"div",9)(23,"div",10)(24,"a",11),l(25,"Mercado Gen\xE9rico "),a(26,"mat-icon"),l(27,"house"),r()()(),a(28,"div",12),d(29,"app-login",13),r()()(),d(30,"router-outlet"),r()()),i&2&&(c(),m("mode",z(3,6,s.isHandset$)?"over":"side")("opened",z(4,8,s.isHandset$)===!1),Ce("role",z(5,10,s.isHandset$)?"dialog":"navigation"),c(16),m("ngIf",s.rolAdmin),c(3),ye(z(21,12,s.isHandset$)?20:-1),c(9),m("usuario",s.usuario))},dependencies:[M,Ve,Le,Be,Ze,lt,mt,it,Ke,et,Je,rt,ot,xt,Te],styles:[".sidenav-container[_ngcontent-%COMP%]{height:100%}.sidenav[_ngcontent-%COMP%]{width:10%;border-top-right-radius:0;border-right-width:0px;background-color:#4c77e4}.sidenav[_ngcontent-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{background-color:#4c77e4}.opc[_ngcontent-%COMP%]{color:beige}.sidenav[_ngcontent-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]   .mat-mdc-button[_ngcontent-%COMP%]{background-color:inherit;color:beige;position:fixed}.mat-toolbar.mat-primary[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1;background-color:#000}.logo[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:25px;font-weight:700;letter-spacing:5px;text-transform:uppercase;font-family:Courier New,monospace;width:100%;height:100%;margin:auto;white-space:nowrap;color:#ff0;text-decoration:overline}.head[_ngcontent-%COMP%]{background-color:#000}"]});let n=e;return n})();var St=(()=>{let e=class e{constructor(){this.title="appInicial"}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=x({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(i,s){i&1&&d(0,"app-nav")},dependencies:[yt]});let n=e;return n})();var ai="@",si=(()=>{let e=class e{constructor(t,i,s,p,u){this.doc=t,this.delegate=i,this.zone=s,this.animationType=p,this.moduleImpl=u,this._rendererFactoryPromise=null,this.scheduler=B(ve,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-PWDGG5U7.js").then(i=>i)).catch(i=>{throw new de(5300,!1)}).then(({\u0275createEngine:i,\u0275AnimationRendererFactory:s})=>{this._engine=i(this.animationType,this.doc);let p=new s(this.delegate,this._engine,this.zone);return this.delegate=p,p})}createRenderer(t,i){let s=this.delegate.createRenderer(t,i);if(s.\u0275type===0)return s;typeof s.throwOnSyntheticProps=="boolean"&&(s.throwOnSyntheticProps=!1);let p=new se(s);return i?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(u=>{let ee=u.createRenderer(t,i);p.use(ee),this.scheduler?.notify(9)}).catch(u=>{p.use(s)}),p}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};e.\u0275fac=function(i){he()},e.\u0275prov=D({token:e,factory:e.\u0275fac});let n=e;return n})(),se=class{constructor(e){this.delegate=e,this.replay=[],this.\u0275type=1}use(e){if(this.delegate=e,this.replay!==null){for(let o of this.replay)o(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,o){return this.delegate.createElement(e,o)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,o){this.delegate.appendChild(e,o)}insertBefore(e,o,t,i){this.delegate.insertBefore(e,o,t,i)}removeChild(e,o,t){this.delegate.removeChild(e,o,t)}selectRootElement(e,o){return this.delegate.selectRootElement(e,o)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,o,t,i){this.delegate.setAttribute(e,o,t,i)}removeAttribute(e,o,t){this.delegate.removeAttribute(e,o,t)}addClass(e,o){this.delegate.addClass(e,o)}removeClass(e,o){this.delegate.removeClass(e,o)}setStyle(e,o,t,i){this.delegate.setStyle(e,o,t,i)}removeStyle(e,o,t){this.delegate.removeStyle(e,o,t)}setProperty(e,o,t){this.shouldReplay(o)&&this.replay.push(i=>i.setProperty(e,o,t)),this.delegate.setProperty(e,o,t)}setValue(e,o){this.delegate.setValue(e,o)}listen(e,o,t){return this.shouldReplay(o)&&this.replay.push(i=>i.listen(e,o,t)),this.delegate.listen(e,o,t)}shouldReplay(e){return this.replay!==null&&e.startsWith(ai)}};function le(n="animations"){return _e("NgAsyncAnimations"),ue([{provide:be,useFactory:(e,o,t)=>new si(e,o,t,n),deps:[Fe,ze,ge]},{provide:fe,useValue:n==="noop"?"NoopAnimations":"BrowserAnimations"}])}var Mt=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=j({type:e,bootstrap:[St]}),e.\u0275inj=L({providers:[le(),le("noop"),W,Y],imports:[Ae,Re,ut,$e,pt,Xe,ct,nt,tt,at,qe,Qe,Ge]});let n=e;return n})();Ue().bootstrapModule(Mt,{ngZoneEventCoalescing:!0}).catch(n=>console.error(n));
