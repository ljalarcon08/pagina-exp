import{a as S,b as Y,c as P,d as Z,e as Le,f as K,h as et}from"./chunk-JXBVIKUS.js";import{a as tt,b as it,c as ot,d as X,e as nt,g as rt}from"./chunk-UJVVSQUN.js";import{A as Ve,B as De,O as je,Oa as Ge,P as Be,Pa as $e,Qa as We,Ra as Ye,Sa as Ze,Ta as Ke,Ua as Xe,Va as Je,Wa as Qe,a as Oe,b as Ee,c as Pe,d as Fe,f as Ae,g as Te,h as Ne,i as ze,j as ie,ka as qe,l as k,la as He,m as Ue,o as O,p as v,r as E,s as q,u as Re,v as H,x as G,y as $,z as W}from"./chunk-PCPSYBWZ.js";import"./chunk-MBZJRQJN.js";import{$c as ke,Aa as _,Ab as l,Cb as _e,Fb as Ce,I as le,Ia as de,Jb as a,Kb as n,Lb as p,Pb as x,Qa as ue,Qc as we,Sb as h,Ub as g,X as me,Zc as y,_ as V,ab as F,bc as A,cc as s,da as ce,db as m,e as U,eb as f,ec as Se,fb as ge,fc as xe,g as R,ga as D,gc as ye,ha as L,hb as fe,hc as Me,jb as he,la as te,lb as ve,ma as j,mc as T,nc as N,pc as Ie,q as ee,qa as C,ra as B,u as se,ua as pe,ya as w,yb as u,za as b,zb as be}from"./chunk-SDJE3UD3.js";var bt=[{path:"producto",loadChildren:()=>import("./chunk-EESCZMCJ.js").then(t=>t.ProductoSharedModule)},{path:"",pathMatch:"full",redirectTo:"producto/home"},{path:"admin",loadChildren:()=>import("./chunk-M2NQ22YT.js").then(t=>t.AdminSharedModule)},{path:"**",redirectTo:"producto/home"}],at=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=B({type:t})}static{this.\u0275inj=L({imports:[ie.forRoot(bt),et.forRoot(),rt.forRoot(),ie]})}}return t})();var M=(()=>{class t{constructor(e,i){this.http=e,this.libService=i,this.URL_USUARIO="http://localhost:8090/api/usuario"}getUsuarioByEmail(e){return this.http.get(`${this.URL_USUARIO}/email/${e}`,this.libService.getHeader())}actualizarUsuario(e){return this.http.put(`${this.URL_USUARIO}/actualizar/${e.id}`,e,this.libService.getHeader())}actualizaImagenUsuario(e,i){return this.http.put(`${this.URL_USUARIO}/actualizarImagen/${e}`,{imagen:i},this.libService.getHeader())}static{this.\u0275fac=function(i){return new(i||t)(te(Oe),te(k))}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var ut=U(X());var ne=U(X());function _t(t,r){t&1&&(a(0,"span",16),s(1,"Favor ingrese email o formato incorrecto"),n())}function Ct(t,r){t&1&&(a(0,"span",16),s(1,"Favor ingrese contrase\xF1a"),n())}function St(t,r){if(t&1){let e=x();a(0,"div",3)(1,"h6"),s(2,"Ingresa a tu cuenta"),n(),a(3,"form",4),h("ngSubmit",function(){b(e);let o=g();return _(o.login())}),a(4,"div",5)(5,"div",6)(6,"label",7),s(7,"Email"),n(),p(8,"input",8),u(9,_t,2,0,"span",9),n()(),a(10,"div",5)(11,"div",6)(12,"label",7),s(13,"Contrase\xF1a"),n(),p(14,"input",10),u(15,Ct,2,0,"span",9),n()(),a(16,"div",11)(17,"div",12)(18,"button",13),s(19,"Ingresar"),n()(),a(20,"div",14)(21,"button",15),h("click",function(){b(e);let o=g();return _(o.abrirRegistrar())}),s(22,"Registrarte"),n()()()()()}if(t&2){let e=g();m(3),l("formGroup",e.loginForm),m(6),l("ngIf",e.campoError("email",e.loginForm)),m(6),l("ngIf",e.campoError("password",e.loginForm))}}function xt(t,r){t&1&&(a(0,"span",16),s(1,"Favor ingrese nombre completo"),n())}function yt(t,r){t&1&&(a(0,"span",16),s(1,"Favor ingrese email o formato incorrecto"),n())}function Mt(t,r){t&1&&(a(0,"span",16),s(1,"Favor ingrese contrase\xF1a"),n())}function It(t,r){t&1&&(a(0,"span",16),s(1,"Favor ingrese contrase\xF1a"),n())}function wt(t,r){if(t&1){let e=x();a(0,"div",3)(1,"h6",17),s(2,"Crea tu cuenta"),n(),a(3,"form",4),h("ngSubmit",function(){b(e);let o=g();return _(o.signUp())}),a(4,"div",5)(5,"div",6)(6,"label",7),s(7,"Nombre"),n(),p(8,"input",18),u(9,xt,2,0,"span",9),n()(),a(10,"div",5)(11,"div",6)(12,"label",7),s(13,"Email"),n(),p(14,"input",8),u(15,yt,2,0,"span",9),n()(),a(16,"div",5)(17,"div",6)(18,"label",7),s(19,"Contrase\xF1a"),n(),p(20,"input",10),u(21,Mt,2,0,"span",9),n()(),a(22,"div",5)(23,"div",6)(24,"label",7),s(25,"Repita Contrase\xF1a"),n(),p(26,"input",19),u(27,It,2,0,"span",9),n()(),a(28,"div",11)(29,"div",12)(30,"button",13),s(31,"Ingresar"),n()()()()()}if(t&2){let e=g();m(3),l("formGroup",e.signUpForm),m(6),l("ngIf",e.campoError("nombre",e.signUpForm)),m(6),l("ngIf",e.campoError("email",e.signUpForm)),m(6),l("ngIf",e.campoError("password",e.signUpForm)),m(6),l("ngIf",e.campoError("password2",e.signUpForm))}}var lt=(()=>{class t{constructor(e,i,o){this.formBuilder=e,this.usuarioService=i,this.libAuthService=o,this.submitF=!1,this.usuario=new S(1,"","",""),this.offCanvas=P.prototype,this.registrar=!1,this.loginForm=this.formBuilder.group({email:["",[v.required,v.email]],password:["",[v.required]]}),this.signUpForm=this.formBuilder.group({nombre:["",[v.required]],email:["",[v.required,v.email]],password:["",[v.required]],password2:["",[v.required]]},{validators:this.revisarPasswords("password","password2")})}ngOnChanges(e){console.log("changes inicion sesion"),console.log(e),e.offCanvas&&(this.offCanvas=e.offCanvas.currentValue)}login(){if(this.submitF=!0,!this.loginForm.invalid){let e=this.loginForm.get("email")?.value;this.usuario.email=e;let i=this.loginForm.get("password")?.value;this.libAuthService.login(e,i).pipe(V(o=>this.usuarioService.getUsuarioByEmail(e))).subscribe(o=>{this.usuario=o[0],console.log(this.usuario),ne.default.fire("Sesion","Sesi\xF3n iniciada correctamente","success"),this.cerrar()})}}campoError(e,i){return!!(i.get(e)?.invalid&&this.submitF)}cerrar(){this.submitF=!1,this.offCanvas.close(this.usuario)}abrirRegistrar(){console.log("abrir registrar"),this.registrar=!0}revisarPasswords(e,i){return o=>{let c=o.get(e),d=o.get(i);c.value===d.value?d.setErrors(null):d.setErrors({noEsIgual:!0})}}signUp(){if(this.submitF=!0,!this.signUpForm.invalid){console.log("form valido");let e=this.signUpForm.get("nombre").value,i=this.signUpForm.get("email").value,o=this.signUpForm.get("password").value,c=new S(1,e,i,"",o,!1);this.libAuthService.signUp(c).subscribe(d=>{console.log(d),this.usuario=d,ne.default.fire("Estado Registro","Registro creado exitosamente","success"),this.submitF=!1,this.offCanvas.close()})}}static{this.\u0275fac=function(i){return new(i||t)(f(W),f(M),f(k))}}static{this.\u0275cmp=C({type:t,selectors:[["app-inicio-sesion"]],inputs:{offCanvas:"offCanvas"},features:[w],decls:4,vars:2,consts:[[1,"login-register","login-sidebar"],[1,"login-box","card"],["class","card-body",4,"ngIf"],[1,"card-body"],["autocomplete","off",1,"form-horizontal","form-material",3,"ngSubmit","formGroup"],[1,"form-group","m-t-40"],[1,"col-xs-12"],[1,"label-type"],["type","email","placeholder","Email","formControlName","email",1,"form-control"],["class","input-error",4,"ngIf"],["type","password","placeholder","Contrase\xF1a","formControlName","password",1,"form-control"],[1,"row"],[1,"col"],["type","submit",1,"btn","btn-success","col-sm-7"],[1,"col","col-sm-5"],["type","button",1,"btn","btn-outline-success",3,"click"],[1,"input-error"],[1,"primary"],["type","nombre","placeholder","Nombre","formControlName","nombre",1,"form-control"],["type","password","placeholder","Repita Contrase\xF1a","formControlName","password2",1,"form-control"]],template:function(i,o){i&1&&(a(0,"section",0)(1,"div",1),u(2,St,23,3,"div",2)(3,wt,32,5,"div",2),n()()),i&2&&(m(2),l("ngIf",!o.registrar),m(),l("ngIf",o.registrar))},dependencies:[y,H,O,E,q,G,$],styles:[".form-control[_ngcontent-%COMP%]{color:#67757c;min-height:38px;display:initial}.form-group[_ngcontent-%COMP%]{margin-bottom:25px}.form-material[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{font:.5rem/1.5 var(--bs-font-sans-serif);overflow:hidden}.form-material[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{background-color:transparent;background-position:center bottom,center calc(100% - 1px);background-repeat:no-repeat;background-size:0 2px,100% 1px;padding:0;-webkit-transition:background 0s ease-out 0s;-o-transition:background 0s ease-out 0s;transition:background 0s ease-out 0s}.form-material[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%], .form-material[_ngcontent-%COMP%]   .form-control.focus[_ngcontent-%COMP%], .form-material[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{background-image:-webkit-gradient(linear,left top,left bottom,from(#398bf7),to(#398bf7)),-webkit-gradient(linear,left top,left bottom,from(#e9edf2),to(#e9edf2));background-image:-webkit-linear-gradient(#398bf7,#398bf7),-webkit-linear-gradient(#e9edf2,#e9edf2);background-image:-o-linear-gradient(#398bf7,#398bf7),-o-linear-gradient(#e9edf2,#e9edf2);background-image:linear-gradient(#398bf7,#398bf7),linear-gradient(#e9edf2,#e9edf2);border:0 none;border-radius:0;-webkit-box-shadow:none;box-shadow:none;float:none}.form-horizontal[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:0}.form-control[_ngcontent-%COMP%]{border:0px;border-radius:0;padding-left:0;border-bottom:1px solid #f6f9ff}.form-control[_ngcontent-%COMP%]:focus{border-bottom:1px solid #398bf7}.input-error[_ngcontent-%COMP%]{color:red;font-size:small}.label-type[_ngcontent-%COMP%]{font-size:small;color:#67757c}"]})}}return t})();var mt=U(X());function Ot(t,r){t&1&&(a(0,"span",14),s(1,"Favor ingrese nombre"),n())}function Et(t,r){t&1&&(a(0,"span",14),s(1,"Favor ingrese email o formato incorrecto"),n())}function Pt(t,r){t&1&&(a(0,"span",14),s(1,"Favor ingrese contrase\xF1a o contrase\xF1as no coinciden"),n())}function Ft(t,r){t&1&&(a(0,"span",14),s(1,"Favor ingrese contrase\xF1a o contrase\xF1as no coinciden"),n())}function At(t,r){if(t&1){let e=x();a(0,"form",4),h("ngSubmit",function(){b(e);let o=g();return _(o.actualizarUsuario())}),a(1,"div",5)(2,"div",6)(3,"label",7),s(4,"Nombre"),n(),p(5,"input",8),u(6,Ot,2,0,"span",9),n()(),a(7,"div",5)(8,"div",6)(9,"label",7),s(10,"Email"),n(),p(11,"input",10),u(12,Et,2,0,"span",9),n()(),a(13,"div",5)(14,"div",6)(15,"label",7),s(16,"Nueva contrase\xF1a"),n(),p(17,"input",11),u(18,Pt,2,0,"span",9),n()(),a(19,"div",5)(20,"div",6)(21,"label",7),s(22,"Repetir nueva contrase\xF1a"),n(),p(23,"input",12),u(24,Ft,2,0,"span",9),n()(),a(25,"div")(26,"button",13),s(27,"Ingresar"),n()()()}if(t&2){let e=g();l("formGroup",e.actualizarForm),m(6),l("ngIf",e.campoError("email")),m(6),l("ngIf",e.campoError("email")),m(6),l("ngIf",e.campoError("password")),m(6),l("ngIf",e.campoError("password2"))}}var ct=(()=>{class t{constructor(e,i){this.formBuilder=e,this.usuarioService=i,this.usuario=new S(1,"","",""),this.offCanvas=P.prototype,this.submitM=!1,this.cambioOk=!1,this.actualizarForm=this.formBuilder.group({nombre:["",v.required],email:["",[v.required,v.email]],password:["",[v.required]],password2:["",[v.required]]},{validators:this.revisarPasswords("password","password2")}),console.log(this.usuario),this.actualizarForm.controls.email.disable()}ngOnChanges(e){this.usuario=e.usuario.currentValue,this.actualizarForm.patchValue({nombre:this.usuario.name}),this.actualizarForm.patchValue({email:this.usuario.email}),e.offCanvas&&(this.offCanvas=e.offCanvas.currentValue)}actualizarUsuario(){if(this.submitM=!0,!this.actualizarForm.invalid){console.log("OK es actualizable");let e=this.actualizarForm.get("nombre").value,i=this.actualizarForm.get("email").value,o=this.actualizarForm.get("password").value,c=new S(this.usuario.id,e,i,this.usuario.imagen,o,this.usuario.google);this.usuarioService.actualizarUsuario(c).subscribe(d=>{this.usuario=d,this.cambioOk=!0,this.cerrar(),mt.default.fire("Actualizaci\xF3n Usuario","Cambios aplicados correctamente","success")})}}campoError(e){return!!(this.actualizarForm.get(e)?.invalid&&this.submitM)}revisarPasswords(e,i){return o=>{let c=o.get(e),d=o.get(i);c.value===d.value?d.setErrors(null):d.setErrors({noEsIgual:!0})}}cerrar(){this.offCanvas.close(this.usuario)}static{this.\u0275fac=function(i){return new(i||t)(f(W),f(M))}}static{this.\u0275cmp=C({type:t,selectors:[["app-actualiza-usuario"]],inputs:{usuario:"usuario",offCanvas:"offCanvas"},features:[w],decls:4,vars:1,consts:[[1,"login-register","login-sidebar"],[1,"login-box","card"],[1,"card-body"],["class","form-horizontal form-material","autocomplete","off",3,"formGroup","ngSubmit",4,"ngIf"],["autocomplete","off",1,"form-horizontal","form-material",3,"ngSubmit","formGroup"],[1,"form-group","m-t-40"],[1,"col-xs-12"],[1,"label-type"],["type","nombre","placeholder","Nombre","formControlName","nombre",1,"form-control"],["class","input-error",4,"ngIf"],["readonly","readonly","type","email","placeholder","Email","formControlName","email",1,"form-control","disabled-input"],["type","password","placeholder","Contrase\xF1a","formControlName","password",1,"form-control"],["type","password","placeholder","Repita Contrase\xF1a","formControlName","password2",1,"form-control"],["type","submit",1,"btn","btn-success"],[1,"input-error"]],template:function(i,o){i&1&&(a(0,"section",0)(1,"div",1)(2,"div",2),u(3,At,28,5,"form",3),n()()()),i&2&&(m(3),l("ngIf",!o.cambioOk))},dependencies:[y,H,O,E,q,G,$],styles:[".login-register[_ngcontent-%COMP%]{background-size:cover;background-repeat:no-repeat;background-position:center center;height:100%;width:100%;padding:10% 0;position:fixed}.login-box[_ngcontent-%COMP%]{margin:0 auto}.login-box[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{left:0;right:0}.login-box[_ngcontent-%COMP%]   .social[_ngcontent-%COMP%]{display:block;margin-bottom:30px}#recoverform[_ngcontent-%COMP%]{display:none}.login-sidebar[_ngcontent-%COMP%]{padding:0;margin-top:0}.login-sidebar[_ngcontent-%COMP%]   .login-box[_ngcontent-%COMP%]{position:absolute;height:100%;width:100%;max-height:450px;max-width:350px}.form-control[_ngcontent-%COMP%]{color:#67757c;min-height:38px;display:initial}.form-group[_ngcontent-%COMP%]{margin-bottom:25px}.form-material[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{overflow:hidden}.form-material[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{background-color:transparent;background-position:center bottom,center calc(100% - 1px);background-repeat:no-repeat;background-size:0 2px,100% 1px;padding:0;-webkit-transition:background 0s ease-out 0s;-o-transition:background 0s ease-out 0s;transition:background 0s ease-out 0s}.form-material[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%], .form-material[_ngcontent-%COMP%]   .form-control.focus[_ngcontent-%COMP%], .form-material[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{background-image:-webkit-gradient(linear,left top,left bottom,from(#398bf7),to(#398bf7)),-webkit-gradient(linear,left top,left bottom,from(#e9edf2),to(#e9edf2));background-image:-webkit-linear-gradient(#398bf7,#398bf7),-webkit-linear-gradient(#e9edf2,#e9edf2);background-image:-o-linear-gradient(#398bf7,#398bf7),-o-linear-gradient(#e9edf2,#e9edf2);background-image:linear-gradient(#398bf7,#398bf7),linear-gradient(#e9edf2,#e9edf2);border:0 none;border-radius:0;-webkit-box-shadow:none;box-shadow:none;float:none}.form-horizontal[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:0}.form-control[_ngcontent-%COMP%]{border:0px;border-radius:0;padding-left:0;border-bottom:1px solid #f6f9ff}.form-control[_ngcontent-%COMP%]:focus{border-bottom:1px solid #398bf7}.input-error[_ngcontent-%COMP%]{color:red;font-size:small}.avatar-img[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:40px}.cursor[_ngcontent-%COMP%]{cursor:pointer}.disabled-input[_ngcontent-%COMP%]{color:silver}.label-type[_ngcontent-%COMP%]{font-size:small;color:#67757c}"]})}}return t})();var pt=U(X());function zt(t,r){if(t&1&&p(0,"img",19),t&2){let e=g();l("src",e.imagenService.img,F)}}function Ut(t,r){t&1&&p(0,"img",20)}function Rt(t,r){if(t&1&&p(0,"img",21),t&2){let e=g();l("src",e.imgTemp,F)}}var dt=(()=>{class t{constructor(e,i){this.imagenService=e,this.usuarioService=i,this.imagen="",this.imgTemp=null,this.imgCheck=""}cerrarModal(){this.imgTemp=null,this.imgCheck="",this.imagenService.cerrarModal()}revisarImagen(e){console.log("revisarImagen"),this.imgCheck=e.target.value,this.imagenService.revisaTipoImagen(e.target.value)?(this.imgTemp=this.imgCheck,console.log(e.target.value)):e.target.value=""}cambiarImagen(){console.log("cambiarImagen"),console.log(this.imgCheck),this.imgTemp=this.imgCheck,this.imagen=this.imgCheck,console.log(this.imagen)}subirImagen(){console.log("subir imagen"),console.log(this.imagen);let e=this.imagenService.id;this.imagenService.tipo==="usuario"&&this.actualizarImagenUsuario(Number(e))}actualizarImagenUsuario(e){this.usuarioService.actualizaImagenUsuario(e,this.imgCheck).subscribe(i=>{this.respuestaCarga(i)})}respuestaCarga(e){this.imagenService.nuevaImagen.emit(this.imagen),this.cerrarModal(),pt.default.fire("Actualizar Imagen","Imagen actualizada correctamente","success")}static{this.\u0275fac=function(i){return new(i||t)(f(K),f(M))}}static{this.\u0275cmp=C({type:t,selectors:[["app-imagen-modal"]],decls:33,vars:6,consts:[[1,"fondo-modal-imagen","animated","fadeIn","fast"],["tabindex","-1","role","dialog",1,"modal","fade","show",2,"display","block"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body"],[1,"container"],[1,"row"],[1,"col"],[1,"text-center"],["class","img-avatar","alt","Imagen Actual","title","Imagen Actual",3,"src",4,"ngIf"],["src","noimg.jpg","class","img-avatar",4,"ngIf"],["class","img-avatar","alt","Imagen Nueva","title","Imagen Nueva",3,"src",4,"ngIf"],["type","url","placeholder","Ingrese url de imagen",3,"change","ngModelChange","ngModel"],["disabled","!imgCheck",1,"btn","btn-secondary","btn-sm",3,"click"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-default",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],["alt","Imagen Actual","title","Imagen Actual",1,"img-avatar",3,"src"],["src","noimg.jpg",1,"img-avatar"],["alt","Imagen Nueva","title","Imagen Nueva",1,"img-avatar",3,"src"]],template:function(i,o){i&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h5",5),s(6,"Cargar imagen"),n()(),a(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"p",10)(12,"b"),s(13,"Imagen actual"),n()()(),a(14,"div",9)(15,"p",10)(16,"b",10),s(17,"Imagen nueva"),n()()()(),a(18,"div",8)(19,"div",9),u(20,zt,1,1,"img",11)(21,Ut,1,0,"img",12),n(),a(22,"div",9),u(23,Rt,1,1,"img",13),n()()()(),a(24,"div",10)(25,"input",14),h("change",function(d){return o.revisarImagen(d)}),Me("ngModelChange",function(d){return ye(o.imgCheck,d)||(o.imgCheck=d),d}),n(),a(26,"button",15),h("click",function(){return o.cambiarImagen()}),s(27,"Ver"),n()(),a(28,"div",16)(29,"button",17),h("click",function(){return o.cerrarModal()}),s(30," Cancelar "),n(),a(31,"button",18),h("click",function(){return o.subirImagen()}),s(32,"Actualizar foto"),n()()()()()()),i&2&&(_e("oculto",o.imagenService.ocultarModal),m(20),l("ngIf",o.imagenService.revisaTipoImagen(o.imagenService.img)),m(),l("ngIf",!o.imagenService.revisaTipoImagen(o.imagenService.img)),m(2),l("ngIf",o.imgTemp),m(2),xe("ngModel",o.imgCheck))},dependencies:[y,O,E,Re],styles:[".fondo-modal-imagen[_ngcontent-%COMP%]{background-color:#0006;left:0;height:100%;position:fixed;top:0;width:100%;z-index:9999}.oculto[_ngcontent-%COMP%]{display:none}.fast[_ngcontent-%COMP%]{-webkit-animation-duration:.3s;animation-duration:.3s;-webkit-animation-fill-mode:both;animation-fill-mode:both}.img-avatar[_ngcontent-%COMP%]{height:100%;width:100%}"]})}}return t})();function Dt(t,r){t&1&&(a(0,"h5",15),s(1,"Ingresar / Registrarte"),n())}function Lt(t,r){t&1&&(a(0,"h5",15),s(1,"Actualizar datos"),n())}function jt(t,r){if(t&1&&p(0,"app-inicio-sesion",16),t&2){let e=g(2);l("offCanvas",e.offCanvas)}}function Bt(t,r){if(t&1&&p(0,"app-actualiza-usuario",17),t&2){let e=g(2);l("offCanvas",e.offCanvas)("usuario",e.usuario)}}function qt(t,r){if(t&1){let e=x();a(0,"div",9),u(1,Dt,2,0,"h5",10)(2,Lt,2,0,"h5",10),a(3,"button",11),h("click",function(){b(e);let o=g();return _(o.cerrar())}),n()(),a(4,"div",12),u(5,jt,1,1,"app-inicio-sesion",13)(6,Bt,1,2,"app-actualiza-usuario",14),n()}if(t&2){let e=g();m(),l("ngIf",!e.actDatos),m(),l("ngIf",e.actDatos),m(3),l("ngIf",!e.loginOk),m(),l("ngIf",e.actDatos)}}function Ht(t,r){if(t&1){let e=x();a(0,"a",18),h("click",function(){b(e);let o=g(),c=A(1);return _(o.abrir(c))}),p(1,"img",19),n()}}function Gt(t,r){if(t&1&&p(0,"img",23),t&2){let e=g(2);l("src",e.usuario.imagen,F)}}function $t(t,r){t&1&&p(0,"img",24)}function Wt(t,r){if(t&1&&(a(0,"a",20),u(1,Gt,1,1,"img",21)(2,$t,1,0,"img",22),n()),t&2){let e=g();m(),l("ngIf",e.imagenService.revisaTipoImagen(e.usuario.imagen)),m(),l("ngIf",!e.imagenService.revisaTipoImagen(e.usuario.imagen))}}var gt=(()=>{class t{constructor(e,i,o,c,d){this.config=e,this.offcanvasService=i,this.imagenService=o,this.libAuthService=c,this.usuarioService=d,this.usuario=new S(1,"","",""),this.submitF=!1,this.actDatos=!1,this.loginOk=!1,this.offCanvas=P.prototype,this.changeImg=R.EMPTY,e.position="end",e.keyboard=!1,e.scroll=!0}ngOnInit(){if(this.libAuthService.getToken()){let e=this.libAuthService.getEmail();this.libAuthService.checkToken().pipe(V(i=>i.valid?(console.log(i.valid),this.usuarioService.getUsuarioByEmail(e)):(this.libAuthService.quitarToken(),this.loginOk=!1,ee())),le(i=>(this.libAuthService.quitarToken(),ee()))).subscribe(i=>{i?(this.usuario=i[0],this.loginOk=!0):this.loginOk=!1})}this.changeImg=this.imagenService.nuevaImagen.subscribe(e=>{this.cargaUsuario()})}cargaUsuario(){if(this.libAuthService.getToken()){let e=this.libAuthService.getEmail();this.usuarioService.getUsuarioByEmail(e).subscribe(i=>{this.usuario=i[0],console.log(this.usuario)})}}ngOnChanges(e){this.usuario=e.usuario.currentValue,console.log("login changes"),console.log(this.usuario),this.libAuthService.getToken()&&this.usuario.email&&(this.loginOk=!0)}ngOnDestroy(){throw new Error("Method not implemented.")}abrir(e){this.actDatos=!1,this.offCanvas=this.offcanvasService.open(e),this.offCanvas.closed.subscribe(i=>{console.log("respuesta cierre canvas"),console.log(i),i?(this.usuario=i,this.loginOk=!0):(console.log("sin datos"),this.usuario=new S(1,"","",""),this.loginOk=!1)})}cerrar(){this.submitF=!1,this.actDatos=!1,this.offCanvas.dismiss()}actualizarDatos(e){this.actDatos=!0,this.loginOk=!0,this.offCanvas=this.offcanvasService.open(e),this.offCanvas.closed.subscribe(i=>{console.log("respuesta cierre canvas"),console.log(i),this.usuario=new S(1,"","",""),this.loginOk=!1})}abrirModal(e){console.log("AbrirModal"),console.log(e),console.log(e.imagen),this.imagenService.abrirModal("usuario",e.id+"",e.imagen)}cerrarSesion(){ut.default.fire({text:"\xBFDesea cerrar sesion?",showDenyButton:!0,confirmButtonText:"Si",denyButtonText:"No",customClass:{actions:"my-actions",confirmButton:"order-2",denyButton:"order-3",title:"popTitle"}}).then(e=>{e.isConfirmed&&(this.loginOk=!1,this.libAuthService.logout().subscribe(i=>{this.libAuthService.quitarToken()}))})}static{this.\u0275fac=function(i){return new(i||t)(f(Y),f(Z),f(K),f(k),f(M))}}static{this.\u0275cmp=C({type:t,selectors:[["app-login"]],inputs:{usuario:"usuario"},features:[w],decls:25,vars:3,consts:[["content",""],["class","btn btn-sm btn-outline-seconday cursor",3,"click",4,"ngIf"],["class","nav-link dropdown-toggle","href","#","role","button","data-bs-toggle","dropdown","aria-expanded","false",4,"ngIf"],[1,"navbar","navbar-expand-lg","navbar-dark"],[1,"container-fluid"],[1,"dropdown-menu","dropdown-menu-dark"],[1,"dropdown-item","disabled"],[1,"dropdown-divider"],[1,"dropdown-item","cursor",3,"click"],[1,"offcanvas-header"],["class","offcanvas-title",4,"ngIf"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"offcanvas-body"],[3,"offCanvas",4,"ngIf"],[3,"offCanvas","usuario",4,"ngIf"],[1,"offcanvas-title"],[3,"offCanvas"],[3,"offCanvas","usuario"],[1,"btn","btn-sm","btn-outline-seconday","cursor",3,"click"],["src","no-avatar.jpg",1,"avatar-img"],["href","#","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle"],["class","avatar-img",3,"src",4,"ngIf"],["class","avatar-img","src","noimg.jpg",4,"ngIf"],[1,"avatar-img",3,"src"],["src","noimg.jpg",1,"avatar-img"]],template:function(i,o){if(i&1){let c=x();u(0,qt,7,4,"ng-template",null,0,Ie)(2,Ht,2,0,"a",1)(3,Wt,3,2,"a",2),a(4,"nav",3)(5,"div",4)(6,"ul",5)(7,"li")(8,"a",6)(9,"small"),s(10),n()()(),a(11,"li"),p(12,"hr",7),n(),a(13,"li")(14,"a",8),h("click",function(){b(c);let Q=A(1);return _(o.actualizarDatos(Q))}),s(15,"Actualizar Datos"),n()(),a(16,"li")(17,"a",8),h("click",function(){return b(c),_(o.abrirModal(o.usuario))}),s(18,"Actualizar Avatar"),n()(),a(19,"li"),p(20,"hr",7),n(),a(21,"li")(22,"a",8),h("click",function(){return b(c),_(o.cerrarSesion())}),s(23,"Cerrar Sesi\xF3n"),n()()()()(),p(24,"app-imagen-modal")}i&2&&(m(2),l("ngIf",!o.loginOk),m(),l("ngIf",o.loginOk),m(7),Se("Bienvenido ",o.usuario.name,""))},dependencies:[y,lt,ct,dt],styles:[".login-register[_ngcontent-%COMP%]{background-size:cover;background-repeat:no-repeat;background-position:center center;height:100%;width:100%;padding:10% 0;position:fixed}.login-box[_ngcontent-%COMP%]{margin:0 auto}.login-box[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{left:0;right:0}.login-box[_ngcontent-%COMP%]   .social[_ngcontent-%COMP%]{display:block;margin-bottom:30px}#recoverform[_ngcontent-%COMP%]{display:none}.login-sidebar[_ngcontent-%COMP%]{padding:0;margin-top:0}.login-sidebar[_ngcontent-%COMP%]   .login-box[_ngcontent-%COMP%]{position:absolute;height:100%;width:100%;max-height:400px;max-width:350px}.cursor[_ngcontent-%COMP%]{cursor:pointer}.offcanvas-header[_ngcontent-%COMP%]{color:bisque;background-color:#398bf7}.avatar-img[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:40px}"]})}}return t})();function Zt(t,r){t&1&&(a(0,"a",14)(1,"mat-icon"),s(2,"admin_panel_settings"),n(),a(3,"span",6),s(4,"Admin"),n()())}function Kt(t,r){if(t&1){let e=x();a(0,"button",15),h("click",function(){b(e),g();let o=A(2);return _(o.toggle())}),a(1,"mat-icon",16),s(2,"menu"),n()()}}var ft=(()=>{class t{constructor(e,i,o){this.libService=e,this.router=i,this.usuarioService=o,this.breakpointObserver=j(je),this.usuario=new S(1,"","",""),this.rolAdmin=!1,this.cambioToken=R.EMPTY,this.isHandset$=this.breakpointObserver.observe(Be.Handset).pipe(se(c=>c.matches),me()),console.log(e.getMessage()),this.rolAdmin=e.tieneRol("ROLE_ADMIN"),console.log("roladmin"),console.log(this.rolAdmin)}ngOnChanges(e){let i=e.usuario.currentValue;console.log("usuarioCambio"),console.log(i)}ngOnDestroy(){this.cambioToken.unsubscribe}ngOnInit(){this.cambioToken=this.libService.cambioToken.subscribe(e=>this.rolAdmin=this.libService.tieneRol("ROLE_ADMIN"))}static{this.\u0275fac=function(i){return new(i||t)(f(k),f(Te),f(M))}}static{this.\u0275cmp=C({type:t,selectors:[["app-nav"]],features:[w],decls:31,vars:14,consts:[["drawer",""],[1,"sidenav-container"],["fixedInViewport","",1,"sidenav",3,"mode","opened"],["color","primary"],["mat-button",""],["mat-list-item","","routerLink","/producto/home","routerLinkActive","router-link-active"],[1,"opc"],["mat-list-item","","routerLink","/admin/home",4,"ngIf"],["type","button","aria-label","Toggle sidenav","mat-icon-button",""],[1,"row"],[1,"col","float-start","col-sm-11","logo"],["routerLink","/producto/home"],[1,"col","col-sm-1","position-absolute","top-50","end-0"],[3,"usuario"],["mat-list-item","","routerLink","/admin/home"],["type","button","aria-label","Toggle sidenav","mat-icon-button","",3,"click"],["aria-label","Side nav toggle icon"]],template:function(i,o){i&1&&(a(0,"mat-sidenav-container",1)(1,"mat-sidenav",2,0),T(3,"async"),T(4,"async"),T(5,"async"),a(6,"mat-toolbar",3)(7,"button",4)(8,"mat-icon"),s(9,"menu"),n(),s(10,"Menu"),n()(),a(11,"mat-nav-list")(12,"a",5)(13,"mat-icon"),s(14,"shopping_bag"),n(),a(15,"span",6),s(16,"Producto"),n()(),u(17,Zt,5,0,"a",7),n()(),a(18,"mat-sidenav-content")(19,"mat-toolbar",3),u(20,Kt,3,0,"button",8),T(21,"async"),a(22,"div",9)(23,"div",10)(24,"a",11),s(25,"Mercado Gen\xE9rico "),a(26,"mat-icon"),s(27,"house"),n()()(),a(28,"div",12),p(29,"app-login",13),n()()(),p(30,"router-outlet"),n()()),i&2&&(m(),l("mode",N(3,6,o.isHandset$)?"over":"side")("opened",N(4,8,o.isHandset$)===!1),be("role",N(5,10,o.isHandset$)?"dialog":"navigation"),m(16),l("ngIf",o.rolAdmin),m(3),Ce(N(21,12,o.isHandset$)?20:-1),m(9),l("usuario",o.usuario))},dependencies:[y,Ae,Ne,ze,qe,tt,it,Ze,$e,We,Ge,Je,Xe,gt,ke],styles:[".sidenav-container[_ngcontent-%COMP%]{height:100%}.sidenav[_ngcontent-%COMP%]{width:10%;border-top-right-radius:0;border-right-width:0px;background-color:#4c77e4}.sidenav[_ngcontent-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{background-color:#4c77e4}.opc[_ngcontent-%COMP%]{color:beige}.sidenav[_ngcontent-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]   .mat-mdc-button[_ngcontent-%COMP%]{background-color:inherit;color:beige;position:fixed}.mat-toolbar.mat-primary[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1;background-color:#000}.logo[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:25px;font-weight:700;letter-spacing:5px;text-transform:uppercase;font-family:Courier New,monospace;width:100%;height:100%;margin:auto;white-space:nowrap;color:#ff0;text-decoration:overline}.head[_ngcontent-%COMP%]{background-color:#000}"]})}}return t})();var ht=(()=>{class t{constructor(){this.title="appInicial"}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=C({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(i,o){i&1&&p(0,"app-nav")},dependencies:[ft]})}}return t})();var Jt="@",Qt=(()=>{class t{constructor(e,i,o,c,d){this.doc=e,this.delegate=i,this.zone=o,this.animationType=c,this.moduleImpl=d,this._rendererFactoryPromise=null,this.scheduler=j(fe,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-NMVBGEGO.js").then(i=>i)).catch(i=>{throw new ce(5300,!1)}).then(({\u0275createEngine:i,\u0275AnimationRendererFactory:o})=>{this._engine=i(this.animationType,this.doc);let c=new o(this.delegate,this._engine,this.zone);return this.delegate=c,c})}createRenderer(e,i){let o=this.delegate.createRenderer(e,i);if(o.\u0275type===0)return o;typeof o.throwOnSyntheticProps=="boolean"&&(o.throwOnSyntheticProps=!1);let c=new re(o);return i?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(d=>{let Q=d.createRenderer(e,i);c.use(Q),this.scheduler?.notify(9)}).catch(d=>{c.use(o)}),c}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}static{this.\u0275fac=function(i){ge()}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac})}}return t})(),re=class{constructor(r){this.delegate=r,this.replay=[],this.\u0275type=1}use(r){if(this.delegate=r,this.replay!==null){for(let e of this.replay)e(r);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(r,e){return this.delegate.createElement(r,e)}createComment(r){return this.delegate.createComment(r)}createText(r){return this.delegate.createText(r)}get destroyNode(){return this.delegate.destroyNode}appendChild(r,e){this.delegate.appendChild(r,e)}insertBefore(r,e,i,o){this.delegate.insertBefore(r,e,i,o)}removeChild(r,e,i){this.delegate.removeChild(r,e,i)}selectRootElement(r,e){return this.delegate.selectRootElement(r,e)}parentNode(r){return this.delegate.parentNode(r)}nextSibling(r){return this.delegate.nextSibling(r)}setAttribute(r,e,i,o){this.delegate.setAttribute(r,e,i,o)}removeAttribute(r,e,i){this.delegate.removeAttribute(r,e,i)}addClass(r,e){this.delegate.addClass(r,e)}removeClass(r,e){this.delegate.removeClass(r,e)}setStyle(r,e,i,o){this.delegate.setStyle(r,e,i,o)}removeStyle(r,e,i){this.delegate.removeStyle(r,e,i)}setProperty(r,e,i){this.shouldReplay(e)&&this.replay.push(o=>o.setProperty(r,e,i)),this.delegate.setProperty(r,e,i)}setValue(r,e){this.delegate.setValue(r,e)}listen(r,e,i){return this.shouldReplay(e)&&this.replay.push(o=>o.listen(r,e,i)),this.delegate.listen(r,e,i)}shouldReplay(r){return this.replay!==null&&r.startsWith(Jt)}};function ae(t="animations"){return ve("NgAsyncAnimations"),pe([{provide:he,useFactory:(r,e,i)=>new Qt(r,e,i,t),deps:[we,Ee,de]},{provide:ue,useValue:t==="noop"?"NoopAnimations":"BrowserAnimations"}])}var vt=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=B({type:t,bootstrap:[ht]})}static{this.\u0275inj=L({providers:[ae(),ae("noop"),Y,Z],imports:[Fe,at,Ve,nt,He,ot,Ke,Ye,Qe,Ue,Le,De]})}}return t})();Pe().bootstrapModule(vt,{ngZoneEventCoalescing:!0}).catch(t=>console.error(t));
